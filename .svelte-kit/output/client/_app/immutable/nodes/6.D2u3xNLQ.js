import{s as V,o as A,n as T}from"../chunks/scheduler.Dqz8o37y.js";import{S as P,i as R,n as B,s as M,e as v,o as I,j,c as g,a as S,w as D,d as f,x as m,p as w,q as N,b as $,k as x,l as q,f as k,r as z,t as y,u as O,v as G}from"../chunks/index.Cr-v4LAJ.js";import{g as J}from"../chunks/entry.BmrUlgo1.js";import{C as U,R as F,a as h}from"../chunks/components.header.DVQm-n5C.js";import{C as K}from"../chunks/components.row.edit.BVImyfRB.js";const Q=async({params:i})=>({dataName:i.name}),se=Object.freeze(Object.defineProperty({__proto__:null,load:Q},Symbol.toStringTag,{value:"Module"}));function W(i){let t,s="<div></div> <div></div> <div></div> <div></div>";return{c(){t=v("div"),t.innerHTML=s,this.h()},l(a){t=g(a,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),D(t)!=="svelte-1t4d9sj"&&(t.innerHTML=s),this.h()},h(){w(t,"class","ring_lower lds-ring"),m(t,"margin","auto"),m(t,"position","relative"),m(t,"top","64px")},m(a,e){$(a,t,e)},p:T,i:T,o:T,d(a){a&&f(t)}}}function X(i){let t,s,a;return s=new K({props:{sheetConfig:i[0],rowConfig:i[1]}}),{c(){t=v("div"),B(s.$$.fragment),this.h()},l(e){t=g(e,"DIV",{style:!0});var o=S(t);I(s.$$.fragment,o),o.forEach(f),this.h()},h(){m(t,"padding-bottom","104px")},m(e,o){$(e,t,o),N(s,t,null),a=!0},p(e,o){const d={};o&1&&(d.sheetConfig=e[0]),o&2&&(d.rowConfig=e[1]),s.$set(d)},i(e){a||(y(s.$$.fragment,e),a=!0)},o(e){k(s.$$.fragment,e),a=!1},d(e){e&&f(t),O(s)}}}function Y(i){let t,s,a,e,o,d='<svg data-icon-name="arrowBackIcon" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill-rule="evenodd" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"></path></svg>',p,n,l,b,C,L;t=new U({props:{actionButtonText:"Save",actionButtonColor:"green",actionButtonTextColor:"white",actionEvent:i[2]}});const E=[X,W],u=[];function H(r,c){return r[0]&&r[1]?0:1}return n=H(i),l=u[n]=E[n](i),{c(){B(t.$$.fragment),s=M(),a=v("div"),e=v("div"),o=v("button"),o.innerHTML=d,p=M(),l.c(),this.h()},l(r){I(t.$$.fragment,r),s=j(r),a=g(r,"DIV",{class:!0});var c=S(a);e=g(c,"DIV",{class:!0});var _=S(e);o=g(_,"BUTTON",{style:!0,class:!0,"data-svelte-h":!0}),D(o)!=="svelte-1sf4hnw"&&(o.innerHTML=d),_.forEach(f),p=j(c),l.l(c),c.forEach(f),this.h()},h(){m(o,"position","relative"),m(o,"top","12px"),m(o,"left","-12px"),w(o,"class","back_button"),w(e,"class","back_box"),w(a,"class","new_box svelte-eoyr66")},m(r,c){N(t,r,c),$(r,s,c),$(r,a,c),x(a,e),x(e,o),x(a,p),u[n].m(a,null),b=!0,C||(L=q(o,"click",Z),C=!0)},p(r,[c]){let _=n;n=H(r),n===_?u[n].p(r,c):(G(),k(u[_],1,1,()=>{u[_]=null}),z(),l=u[n],l?l.p(r,c):(l=u[n]=E[n](r),l.c()),y(l,1),l.m(a,null))},i(r){b||(y(t.$$.fragment,r),y(l),b=!0)},o(r){k(t.$$.fragment,r),k(l),b=!1},d(r){r&&(f(s),f(a)),O(t,r),u[n].d(),C=!1,L()}}}function Z(){history.back()}function ee(i,t,s){let{data:a}=t,e,o=new F,d=[];A(()=>{h.LoadData(a.dataName).then(n=>{d=n.headers,s(0,e=h.GetSheetConfig(a.dataName,d)),e&&(h.setHeaderAction("SAVE"),e==null||e.tagIndexes.id[0],s(1,o=h.GetRowConfig(e,n.headers)))}),document.addEventListener("headerAction",()=>{p()})});function p(){fetch("/api/data/"+(e==null?void 0:e.name),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.row)}).then(n=>{if(n.status===200)return n.json();console.error("Error creating row: "+n.statusText)}).then(n=>{n&&e&&(n.push(h.data[e.name].rows.length.toString()),h.data[e.name].rows.push(n)),J(`/${e==null?void 0:e.name}`)})}return i.$$set=n=>{"data"in n&&s(3,a=n.data)},[e,o,p,a]}class ie extends P{constructor(t){super(),R(this,t,ee,Y,V,{data:3})}}export{ie as component,se as universal};
