var J=Object.defineProperty;var Q=(a,e,s)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var f=(a,e,s)=>(Q(a,typeof e!="symbol"?e+"":e,s),s);import{s as W,n as k,o as X,d as y,r as Z}from"./scheduler.Dqz8o37y.js";import{S as $,i as ee,e as w,s as N,c as U,a as T,w as L,j,d as _,p as h,b as I,k as g,y as F,x as A,l as z,C as D,g as q,h as Y,m as K}from"./index.Cr-v4LAJ.js";import"./entry.BmrUlgo1.js";function ve(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}class te{constructor(e,s,u,t){f(this,"email");f(this,"userName");f(this,"firstName");f(this,"lastName");f(this,"roles",[]);f(this,"photoUrl","");f(this,"providerId","");f(this,"status","");this.email=e,this.userName=s,this.firstName=u,this.lastName=t}}class me{constructor(e,s,u,t,i){f(this,"id");f(this,"name");f(this,"action");f(this,"dateTime");f(this,"link");this.id=e,this.name=s,this.action=u,this.dateTime=t,this.link=i}}class se{constructor(){f(this,"id","");f(this,"name","");f(this,"description","");f(this,"date","");f(this,"tags",{});f(this,"row",[])}}const ie="tyayers@google.com";class ne{constructor(){f(this,"tempFirstName","");f(this,"tempLastName","");f(this,"siteName","Apigee Assets");f(this,"currentUser");f(this,"currentUserLoaded",!1);f(this,"config");f(this,"reloadFlag",!1);f(this,"googleAccessToken","");f(this,"data",{});f(this,"sheetConfig",{});f(this,"testMode",!1);f(this,"setHeaderAction",e=>{console.log(e)});this.siteName||(this.siteName="Data Marketplace"),document.title=this.siteName,this.currentUser=new te(ie,"testUser","Test","User"),this.currentUser.photoUrl="/avatar.png",this.currentUser.providerId="test",this.currentUser.status="approved",document.dispatchEvent(new Event("userUpdated")),fetch("/api/config").then(e=>e.json()).then(e=>{this.config=e,document.dispatchEvent(new Event("configUpdated"))})}SetHeaderAction(e){this.setHeaderAction(e)}LoadUser(e){this.currentUser&&(this.currentUser.email=e)}GetSheetConfig(e,s){var u;if(this.sheetConfig[e])return this.sheetConfig[e];{const t=(u=this.config)==null?void 0:u.data.find(i=>i.name===e);return t&&(t.tagIndexes||(t.tagIndexes={}),t.fieldIndexes||(t.fieldIndexes={}),t.relatedFields||(t.relatedFields=[]),s.forEach((i,n)=>{const l=t.fields.find(o=>o.id===i);l&&l.tags&&l.tags.forEach(o=>{t.tagIndexes[o]||(t.tagIndexes[o]=[]),t.tagIndexes[o].push(n)}),t.fieldIndexes[i]=n}),t.fields.forEach(i=>{i.type==="related"&&t.relatedFields.push(i.relatedKey)}),this.sheetConfig[e]=t),t}}GetRowConfig(e,s,u=void 0){const t=new se;u?t.row=u:(t.row=Array(s.length-1).fill(""),e.fields.forEach(i=>{if(i.initialValue){const n=s.indexOf(i.id);if(i.initialValue==="CURRENT_USER"&&this.currentUser)t.row[n]=this.currentUser.email;else if(i.initialValue==="TODAY"){const l=new Date,o=(l.getMonth()+1).toString()+"/"+l.getDate().toString()+"/"+l.getFullYear().toString();t.row[n]=o}else t.row[n]=i.initialValue}}));for(const[i,n]of Object.entries(e.tagIndexes))n.forEach(l=>{t.tags[i]?t.tags[i]+=" - "+t.row[l]:t.tags[i]=t.row[l],i==="id"&&(t.id=t.row[l]),i==="name"&&(t.name=t.row[l]),i==="description"&&(t.description?t.description+=" - "+t.row[l]:t.description=t.row[l]),i==="date"&&(t.date=t.row[l])});return t}LoadData(e){return new Promise(s=>{if(this.data[e])s(this.data[e]);else{let u="/api/data/"+e;fetch(u).then(t=>t.json()).then(t=>{this.data[e]=t,s(t)})}})}ShowSnackbar(e){const s=document.getElementById("snackbar");s&&(s.innerHTML=e,s.className="show"),setTimeout(function(){s&&(s.className=s.className.replace("show",""))},3e3)}}const O=new ne;function le(a){return{c:k,l:k,m:k,p:k,d:k}}function ae(a){let e,s,u='<svg width="100%" height="100%" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false"><path fill="#333" d="M18 17v-6c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v6H4v2h16v-2h-2zm-2 0H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6zm-4 5c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2z"></path></svg>',t,i,n,l,o,d,v,b,r=a[0]&&P(a),p=a[4]&&G(a);return{c(){r&&r.c(),e=N(),s=w("button"),s.innerHTML=u,t=N(),i=w("button"),n=w("img"),o=N(),p&&p.c(),d=F(),this.h()},l(c){r&&r.l(c),e=j(c),s=U(c,"BUTTON",{style:!0,class:!0,"data-svelte-h":!0}),L(s)!=="svelte-1tm8jaq"&&(s.innerHTML=u),t=j(c),i=U(c,"BUTTON",{class:!0});var m=T(i);n=U(m,"IMG",{class:!0,src:!0,onerror:!0,alt:!0}),m.forEach(_),o=j(c),p&&p.l(c),d=F(),this.h()},h(){A(s,"position","relative"),A(s,"top","-4px"),A(s,"left","-10px"),h(s,"class","back_button"),h(n,"class","profile_button_image svelte-1w3jnz4"),y(n.src,l=a[3].photoUrl)||h(n,"src",l),h(n,"onerror","this.src='/avatar.png';"),h(n,"alt","The user's profile."),h(i,"class","profile_button svelte-1w3jnz4")},m(c,m){r&&r.m(c,m),I(c,e,m),I(c,s,m),I(c,t,m),I(c,i,m),g(i,n),I(c,o,m),p&&p.m(c,m),I(c,d,m),v||(b=[z(i,"click",D(a[7])),z(i,"keydown",D(a[8]))],v=!0)},p(c,m){c[0]?r?r.p(c,m):(r=P(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),m&8&&!y(n.src,l=c[3].photoUrl)&&h(n,"src",l),c[4]?p?p.p(c,m):(p=G(c),p.c(),p.m(d.parentNode,d)):p&&(p.d(1),p=null)},d(c){c&&(_(e),_(s),_(t),_(i),_(o),_(d)),r&&r.d(c),p&&p.d(c),v=!1,Z(b)}}}function P(a){let e,s,u,t,i;return{c(){e=w("button"),s=q(a[0]),this.h()},l(n){e=U(n,"BUTTON",{style:!0,class:!0});var l=T(e);s=Y(l,a[0]),l.forEach(_),this.h()},h(){h(e,"style",u="position: relative; top: -14px; left: -28px; background-color: "+a[1]+"; color: "+a[2]),h(e,"class","rounded_button_outlined")},m(n,l){I(n,e,l),g(e,s),t||(i=z(e,"click",D(a[5])),t=!0)},p(n,l){l&1&&K(s,n[0]),l&6&&u!==(u="position: relative; top: -14px; left: -28px; background-color: "+n[1]+"; color: "+n[2])&&h(e,"style",u)},d(n){n&&_(e),t=!1,i()}}}function G(a){let e,s,u,t,i,n,l,o,d,v,b=a[3].email+"",r,p,c,m,V="",S,H;return{c(){e=w("div"),s=w("div"),u=N(),t=w("div"),i=w("div"),n=w("img"),o=N(),d=w("div"),v=w("div"),r=q(b),c=N(),m=w("div"),m.innerHTML=V,this.h()},l(C){e=U(C,"DIV",{class:!0});var E=T(e);s=U(E,"DIV",{class:!0}),T(s).forEach(_),u=j(E),t=U(E,"DIV",{class:!0});var B=T(t);i=U(B,"DIV",{class:!0});var M=T(i);n=U(M,"IMG",{class:!0,src:!0,onerror:!0,alt:!0}),o=j(M),d=U(M,"DIV",{class:!0});var x=T(d);v=U(x,"DIV",{class:!0,title:!0});var R=T(v);r=Y(R,b),R.forEach(_),x.forEach(_),M.forEach(_),c=j(B),m=U(B,"DIV",{class:!0,"data-svelte-h":!0}),L(m)!=="svelte-1xcxegc"&&(m.innerHTML=V),B.forEach(_),E.forEach(_),this.h()},h(){h(s,"class","arrow svelte-1w3jnz4"),h(n,"class","panel_profile_image svelte-1w3jnz4"),y(n.src,l=a[3].photoUrl)||h(n,"src",l),h(n,"onerror","this.src='/avatar.png';"),h(n,"alt","Profile"),h(v,"class","profile_info_secondary svelte-1w3jnz4"),h(v,"title",p=a[3].email),h(d,"class","profile_info svelte-1w3jnz4"),h(i,"class","menu_profile svelte-1w3jnz4"),h(m,"class","panel svelte-1w3jnz4"),h(t,"class","menu svelte-1w3jnz4"),h(e,"class","menuPanel svelte-1w3jnz4")},m(C,E){I(C,e,E),g(e,s),g(e,u),g(e,t),g(t,i),g(i,n),g(i,o),g(i,d),g(d,v),g(v,r),g(t,c),g(t,m),S||(H=z(e,"click",D(re)),S=!0)},p(C,E){E&8&&!y(n.src,l=C[3].photoUrl)&&h(n,"src",l),E&8&&b!==(b=C[3].email+"")&&K(r,b),E&8&&p!==(p=C[3].email)&&h(v,"title",p)},d(C){C&&_(e),S=!1,H()}}}function oe(a){let e,s,u="",t,i;function n(d,v){return d[3]?ae:le}let l=n(a),o=l(a);return{c(){e=w("div"),s=w("span"),s.innerHTML=u,t=N(),i=w("span"),o.c(),this.h()},l(d){e=U(d,"DIV",{class:!0});var v=T(e);s=U(v,"SPAN",{class:!0,"data-svelte-h":!0}),L(s)!=="svelte-15vukvy"&&(s.innerHTML=u),t=j(v),i=U(v,"SPAN",{class:!0});var b=T(i);o.l(b),b.forEach(_),v.forEach(_),this.h()},h(){h(s,"class","header_left_panel1 svelte-1w3jnz4"),h(i,"class","header_right_panel1 svelte-1w3jnz4"),h(e,"class","header svelte-1w3jnz4")},m(d,v){I(d,e,v),g(e,s),g(e,t),g(e,i),o.m(i,null)},p(d,[v]){l===(l=n(d))&&o?o.p(d,v):(o.d(1),o=l(d),o&&(o.c(),o.m(i,null)))},i:k,o:k,d(d){d&&_(e),o.d()}}}const re=()=>{};function ce(a,e,s){let{actionButtonText:u=""}=e,{actionButtonColor:t="white"}=e,{actionButtonTextColor:i="#6595fc"}=e,{actionEvent:n=r=>{console.log(r)}}=e,l=O.currentUser,o=!1;X(async()=>{document.addEventListener("userUpdated",()=>{s(3,l=O.currentUser)}),document.addEventListener("cancelEvent",()=>{s(4,o=!1)})});function d(){n&&n(u)}const v=()=>{s(4,o=!o)},b=()=>{s(4,o=!o)};return a.$$set=r=>{"actionButtonText"in r&&s(0,u=r.actionButtonText),"actionButtonColor"in r&&s(1,t=r.actionButtonColor),"actionButtonTextColor"in r&&s(2,i=r.actionButtonTextColor),"actionEvent"in r&&s(6,n=r.actionEvent)},[u,t,i,l,o,d,n,v,b]}class pe extends ${constructor(e){super(),ee(this,e,ce,oe,W,{actionButtonText:0,actionButtonColor:1,actionButtonTextColor:2,actionEvent:6})}}export{pe as C,se as R,me as U,O as a,ve as e};
